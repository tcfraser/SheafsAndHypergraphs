% Packages
\usepackage{amsmath}
\usepackage{esint} % For closed integrals
\usepackage{amssymb} % For set symbols
\usepackage{mathtools} % For ceiling/floor brackets
\usepackage{siunitx} % For units

% Brackets
\let\originalleft\left
\let\originalright\right
\renewcommand{\left}{\mathopen{}\mathclose\bgroup\originalleft}
\renewcommand{\right}{\aftergroup\egroup\originalright}

\newcommand{\ba}[1]{\left< #1 \right>} % brackets angled
\newcommand{\bs}[1]{\left[ #1 \right]} % brackets square
\newcommand{\br}[1]{\left( #1 \right)} % brackets round
\newcommand{\bc}[1]{\left\{ #1 \right\}} % brackets curly
\newcommand{\ceil}[1]{\left\lceil #1 \right\rceil} % brackets ceiling
\newcommand{\bre}[1]{\left(#1\right\rvert} % evaluated at brackets
\newcommand{\bse}[1]{\left[#1\right\rvert} % evaluated at brackets
\newcommand{\abs}[1]{\left| #1 \right|} % brackets absolute value
\newcommand{\bra}[1]{\left< #1 \right|} % bra
\newcommand{\ket}[1]{\left| #1 \right>} % ket
\newcommand{\braket}[2]{\left< #1 \middle| #2 \right>} % bra|ket
\newcommand{\bcm}[2]{\left\{ #1 \middle| #2 \right\}} % bra|ket
\newcommand{\bramidket}[3]{\left< #1 \middle| #2 \middle| #3 \right>} % bra|mid|ket
\newcommand{\norm}[1]{\left\lVert#1\right\rVert} % norm

\newcommand{\f}[2]{\frac{#1}{#2}} % fraction shorthand
\newcommand{\iso}{\cong} % isomorphic alias
\newcommand{\del}{\nabla} % nabla alias
\newcommand{\vdel}{\vec{\nabla}} % nabla alias
\newcommand{\curl}{\vdel\times} % curl operator
\renewcommand{\div}{\vdel\cdot} % divergence operator NOTE: this overrides the division symbol
\newcommand{\lapl}{\del^2} % Laplacian
\renewcommand{\inf}{\infty} % infty alias NOTE: this replaces the inf operator
\newcommand{\di}{\partial} % di alias
\newcommand{\defined}{\equiv} % defined alias
\newcommand{\celsius}{^o C} % Simple celsius I'll likely improve later
\newcommand{\w}{\omega} % omega alias
\newcommand{\eq}{\addtocounter{equation}{1}\tag{\theequation}} % adds a number to unnumbered equation
\newcommand{\tsb}[1]{_\text{#1}} % Text subscript
\newcommand{\tsp}[1]{^\text{#1}} % Text superscript
\newcommand{\ident}{\mathbbm{1}}

% greek
\newcommand{\al}{\alpha}
\newcommand{\be}{\beta}
\newcommand{\ga}{\gamma}
\newcommand{\Ga}{\Gamma}
\newcommand{\de}{\delta}
\newcommand{\De}{\Delta}
\newcommand{\ep}{\epsilon}
\newcommand{\vep}{\varepsilon}
\newcommand{\om}{\omega}
\newcommand{\Om}{\Omega}
\newcommand{\te}{\theta}
\newcommand{\la}{\lambda}
\newcommand{\La}{\Lambda}
\newcommand{\ka}{\kappa}
\newcommand{\Ka}{\Kappa}
\newcommand{\ro}{\rho}
\newcommand{\Ro}{\Rho}
\renewcommand{\si}{\sigma}
\newcommand{\Si}{\Sigma}

% Operators
\DeclareMathOperator{\Tr}{Tr}
\DeclareMathOperator{\Lin}{Lin}
\DeclareMathOperator{\Bin}{Bin}
\DeclareMathOperator{\sgn}{sgn}
\DeclareMathOperator{\sinc}{sinc}

% Math Sets
\newcommand{\R}{{\mathbb{R}}}
\newcommand{\Z}{{\mathbb{Z}}}
\newcommand{\N}{{\mathbb{N}}}
\newcommand{\Q}{{\mathbb{Q}}}

% Script macro
\newcommand{\s}[1]{\mathcal{#1}}

% Differentials
\newcommand{\dif}{\mathrm{d}} % differential
\newcommand{\indif}{{\mathchar'26\mkern-12mu \mathrm{d}}} % differential
\newcommand{\dx}{\dif x}
\newcommand{\dy}{\dif y}
\newcommand{\dz}{\dif z}
\newcommand{\dt}{\dif t}
\newcommand{\ddt}{\der{}{t}}
\newcommand{\dphi}{\dif \phi}
\newcommand{\dtheta}{\dif \theta}
\newcommand{\drho}{\dif \rho}
\newcommand{\ds}{\dif s}
\newcommand{\pder}[2]{\frac{\partial #1}{\partial #2}} % partial derivative
\newcommand{\pderk}[3]{\frac{\partial^{#1} #2}{\partial #3^{#1}}} % partial derivative
\newcommand{\pdert}[3]{\br{\frac{\partial #1}{\partial #2}}_{#3}} % partial derivative
\newcommand{\pdder}[2]{\frac{\partial^2 #1}{\partial #2^2}} % partial double derivative
\newcommand{\der}[2]{\frac{\dif #1}{\dif #2}} % derivative
\newcommand{\derk}[3]{\frac{\dif^{#1} #2}{\dif #3^{#1}}} % derivative
\newcommand{\dert}[3]{\br{\frac{\dif #1}{\dif #2}}_{#3}} % partial derivative
\newcommand{\dder}[2]{\frac{\dif^2 #1}{\dif #2^2}} % double derivative

% integrals
\newcommand{\intl}{\int\limits} % integral with limits alias
\newcommand{\intlf}{\intl_{-\infty}^{\infty}} % integral with limits alias
\newcommand{\ointl}{\oint\limits} % integral with limits alias
\newcommand{\iintl}{\iint\limits} % integral with limits alias
\newcommand{\idotsintl}{\idotsint\limits} % integral with limits alias
\newcommand{\oiintl}{\oiint\limits} % integral with limits alias
\newcommand{\iiintl}{\iiint\limits} % integral with limits alias
\newcommand{\oiiintl}{\oiiint\limits} % integral with limits alias

\providecommand{\ovec}[1]{\overrightarrow{#1}}
\providecommand{\bvec}[1]{\mathbf{#1}}
\providecommand{\dvec}[1]{\dot{\vec{#1}}}
\providecommand{\ddvec}[1]{\ddot{\vec{#1}}}
\providecommand{\dddvec}[1]{\dddot{\vec{#1}}}

% Vectors
\newcommand{\ti}[1]{\tilde{#1}\hspace{0pt}} % Note the hspace is for {\ti{a}^b}_c to render correctly
\newcommand{\tbar}[1]{\bar{#1}\hspace{0pt}} % Note the hspace is for {\bar{a}^b}_c to render correctly
\newcommand{\tk}[1]{\hspace{0pt}} % Note the hspace is for {\bar{a}^b}_c to render correctly
% a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w,x,y,z,

\providecommand{\vrp}{\vec{r}\,'}

\providecommand{\va}{\vec{a}}
\providecommand{\vb}{\vec{b}}
\providecommand{\vc}{\vec{c}}
\providecommand{\vd}{\vec{d}}
\providecommand{\ve}{\vec{e}}
\providecommand{\vf}{\vec{f}}
\providecommand{\vg}{\vec{g}}
\providecommand{\vh}{\vec{h}}
\providecommand{\vi}{\vec{i}}
\providecommand{\vj}{\vec{j}}
\providecommand{\vk}{\vec{k}}
\providecommand{\vl}{\vec{l}}
\providecommand{\vm}{\vec{m}}
\providecommand{\vn}{\vec{n}}
\providecommand{\vo}{\vec{o}}
\providecommand{\vp}{\vec{p}}
\providecommand{\vq}{\vec{q}}
\providecommand{\vr}{\vec{r}} % Conflicts with revtex
\providecommand{\vs}{\vec{s}}
\providecommand{\vt}{\vec{t}}
\providecommand{\vu}{\vec{u}}
\providecommand{\vv}{\vec{v}}
\providecommand{\vw}{\vec{w}}
\providecommand{\vx}{\vec{x}}
\providecommand{\vy}{\vec{y}}
\providecommand{\vz}{\vec{z}}
\providecommand{\ha}{\hat{a}}
\providecommand{\hb}{\hat{b}}
\providecommand{\hc}{\hat{c}}
\providecommand{\hd}{\hat{d}}
\providecommand{\he}{\hat{e}}
\providecommand{\hf}{\hat{f}}
\providecommand{\hg}{\hat{g}}
\providecommand{\hh}{\hat{h}}
\providecommand{\hi}{\hat{i}}
\providecommand{\hj}{\hat{j}}
\providecommand{\hk}{\hat{k}}
\providecommand{\hl}{\hat{l}}
\providecommand{\hm}{\hat{m}}
\providecommand{\hn}{\hat{n}}
\providecommand{\ho}{\hat{o}}
\providecommand{\hp}{\hat{p}}
\providecommand{\hq}{\hat{q}}
\providecommand{\hr}{\hat{r}}
\providecommand{\hs}{\hat{s}}
% \providecommand{\ht}{\hat{t}} Causes problems. Sometimes already defined. Nearly perfect :(.
\providecommand{\hu}{\hat{u}}
\providecommand{\hv}{\hat{v}}
\providecommand{\hw}{\hat{w}}
\providecommand{\hx}{\hat{x}}
\providecommand{\hy}{\hat{y}}
\providecommand{\hz}{\hat{z}}
\providecommand{\hA}{\hat{A}}
\providecommand{\hB}{\hat{B}}
\providecommand{\hC}{\hat{C}}
\providecommand{\hD}{\hat{D}}
\providecommand{\hE}{\hat{E}}
\providecommand{\hF}{\hat{F}}
\providecommand{\hG}{\hat{G}}
\providecommand{\hH}{\hat{H}}
\providecommand{\hI}{\hat{I}}
\providecommand{\hJ}{\hat{J}}
\providecommand{\hK}{\hat{K}}
\providecommand{\hL}{\hat{L}}
\providecommand{\hM}{\hat{M}}
\providecommand{\hN}{\hat{N}}
\providecommand{\hO}{\hat{O}}
\providecommand{\hP}{\hat{P}}
\providecommand{\hQ}{\hat{Q}}
\providecommand{\hR}{\hat{R}}
\providecommand{\hS}{\hat{S}}
\providecommand{\hT}{\hat{T}} % Already defined. Neatly perfect :(.
\providecommand{\hU}{\hat{U}}
\providecommand{\hV}{\hat{V}}
\providecommand{\hW}{\hat{W}}
\providecommand{\hX}{\hat{X}}
\providecommand{\hY}{\hat{Y}}
\providecommand{\hZ}{\hat{Z}}
\providecommand{\vA}{\vec{A}}
\providecommand{\vB}{\vec{B}}
\providecommand{\vC}{\vec{C}}
\providecommand{\vD}{\vec{D}}
\providecommand{\vE}{\vec{E}}
\providecommand{\vF}{\vec{F}}
\providecommand{\vG}{\vec{G}}
\providecommand{\vH}{\vec{H}}
\providecommand{\vI}{\vec{I}}
\providecommand{\vJ}{\vec{J}}
\providecommand{\vK}{\vec{K}}
\providecommand{\vL}{\vec{L}}
\providecommand{\vM}{\vec{M}}
\providecommand{\vN}{\vec{N}}
\providecommand{\vO}{\vec{O}}
\providecommand{\vP}{\vec{P}}
\providecommand{\vQ}{\vec{Q}}
\providecommand{\vR}{\vec{R}}
\providecommand{\vS}{\vec{S}}
\providecommand{\vT}{\vec{T}}
\providecommand{\vU}{\vec{U}}
\providecommand{\vV}{\vec{V}}
\providecommand{\vW}{\vec{W}}
\providecommand{\vX}{\vec{X}}
\providecommand{\vY}{\vec{Y}}
\providecommand{\vZ}{\vec{Z}}